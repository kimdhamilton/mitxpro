{% extends "base.html" %}
{% load static wagtailcore_tags wagtailimages_tags wagtailmetadata_tags render_bundle %}


{% block title %}{{ site_name }} | {{ page.title }}{% endblock %}

{% block seohead %}
    {% meta_tags page %}
{% endblock%}

{% block headercontent %}
  <div id="header"></div>
  {% render_bundle 'header' %}
{% endblock %}

{% block scripts %}
  {{ block.super }}
  <script type="text/javascript">
    $(document).ready(function() {
      // FAQs
      $("body").on("click", ".readmore", function(e) {
        const $readmoreText = $(this).find(".readmore-text");
        e.preventDefault();
        $("li.extra-faq").toggleClass("d-none");
        $readmoreText.text($readmoreText.text() === "Hide" ? "Read" : "Hide");
      });

      // More Dates
      $(".dates-tooltip").popover({
        template:
          '<div class="popover" role="tooltip">' +
          '<div class="arrow"></div>' +
          '<div class="popover-header py-2 px-0 mx-5"></div>' +
          '<div class="popover-body"></div>' +
          '</div>'
      });

      var navbar = $("#subNavBarContainer");

      // Navigation Bar
      $("body").scrollspy({
        target: "#subNavBar",
        offset: navbar.outerHeight() + 5.0
      });

      $(window).on("activate.bs.scrollspy", function(e, obj) {
        $("#subNavBarSelector").text(
          $(`.navbar-nav>li>a[href='${obj.relatedTarget}']`).text()
        );
      });

      $(".navbar-nav>li>a").on("click", function(event) {
        event.preventDefault();

        const target = $($(this).attr("href"));

        window.scrollTo(0, target.offset().top - navbar.outerHeight());

        $(".navbar-collapse.show").removeClass("show");
        $(".navbar-toggler").addClass("collapsed");
      });
      
      if (SETTINGS.zendesk_config.help_widget_enabled) {
        zE('webWidget', 'helpCenter:setSuggestions', { search: '{{page.product.title}}'});
      }
    });
  </script>
{% endblock %}

{% block content %}
<div>
    {% include "partials/hero.html" %}
    {% include "partials/metadata-tiles.html" %}
    {% include "partials/subnav.html" with product=page.product %}
    {% if page.outcomes %} {% include "partials/learning-outcomes.html" with page=page.outcomes %} {% endif %}
    {% if page.who_should_enroll %} {% include "partials/target-audience.html" with page=page.who_should_enroll %} {% endif %}
    {% if page.techniques %} {% include "partials/learning-techniques.html" with page=page.techniques %} {% endif %}
    {% if page.testimonials %} {% include "partials/testimonial-carousel.html" with page=page.testimonials %} {% endif %}
    {% if page.faculty %} {% include "partials/faculty-carousel.html" with page=page.faculty %} {% endif %}
    {% if page.course_lineup and page.course_pages %}
      {% with program_page=page.program_page courseware_pages=page.course_pages %}
        {% pageurl program_page as program_url %}
        {% if page.program %}
          {% include "partials/course-carousel.html" with page=page.course_lineup %}
        {% else %}
          {% include "partials/course-carousel.html" with page=page.course_lineup button_title="View Full Program" button_url=program_url %}
        {% endif %}
      {% endwith %}
    {% endif %}
    {% if page.for_teams %} {% include "partials/for-teams.html" with page=page.for_teams %} {% endif %}
    {% if page.faqs %} {% include "partials/faqs.html" with faqs=page.faqs %} {% endif %}
    {% if page.propel_career %} {% include "partials/text-section.html" with page=page.propel_career %} {% endif %}
</div>
{% endblock %}
